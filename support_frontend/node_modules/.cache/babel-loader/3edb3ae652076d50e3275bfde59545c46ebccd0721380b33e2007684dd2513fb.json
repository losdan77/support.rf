{"ast":null,"code":"import axios from\"axios\";import React,{useContext,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import Cookies from'js-cookie';import{AuthContext}from\"../context\";import\"../styles/Login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const API_URL=process.env.REACT_APP_API_URL;const[loginData,setLoginData]=useState({email:'',password:''});const navigate=useNavigate();const{setIsLogin,setProfileId,setAccessToken}=useContext(AuthContext);async function login(e){e.preventDefault();const email=loginData.email;const password=loginData.password;try{const response=await axios.post(`${API_URL}/organizations/login`,{email,password});Cookies.set(\"support_access_token\",response.data,{expires:1});const accessToken=response.data;const response_me=await axios.post(`${API_URL}/organizations/me?access_token=${accessToken}`);setIsLogin(true);setProfileId(response_me.data.id);setAccessToken(accessToken);navigate(`/profile/${response_me.data.id}`);}catch(error){if(error.status===401){alert(\"Неверный email или пароль\");}else{alert(\"Ошибка сервера. Попробуйте позже\");}}setLoginData({email:'',password:''});}return/*#__PURE__*/_jsx(\"div\",{className:\"authPage\",children:/*#__PURE__*/_jsx(\"div\",{className:\"authForm\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Email \\u0430\\u0434\\u0440\\u0435\\u0441\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",value:loginData.email,onChange:e=>setLoginData({...loginData,email:e.target.value})}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text\",children:\"\\u041C\\u044B \\u043D\\u0438\\u043A\\u043E\\u0433\\u0434\\u0430 \\u043D\\u0435 \\u0434\\u0435\\u043B\\u0438\\u043C\\u0441\\u044F \\u0412\\u0430\\u0448\\u0438\\u043C \\u0430\\u0434\\u0440\\u0435\\u0441\\u043E\\u043C.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\",value:loginData.password,onChange:e=>setLoginData({...loginData,password:e.target.value})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 form-check\",children:/*#__PURE__*/_jsx(Link,{to:\"/registration\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(\"p\",{className:\"link-dark\",children:\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 form-check\",children:/*#__PURE__*/_jsx(Link,{to:\"/dont_remember_password\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(\"p\",{className:\"link-dark\",children:\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"})})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:login,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})})});};export default Login;","map":{"version":3,"names":["axios","React","useContext","useState","Link","useNavigate","Cookies","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","API_URL","process","env","REACT_APP_API_URL","loginData","setLoginData","email","password","navigate","setIsLogin","setProfileId","setAccessToken","login","e","preventDefault","response","post","set","data","expires","accessToken","response_me","id","error","status","alert","className","children","htmlFor","type","value","onChange","target","to","style","textDecoration","onClick"],"sources":["/home/los/Рабочий стол/Проги/support.rf/support_frontend/src/pages/Login.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, {useContext, useState} from \"react\";\nimport {Link, useNavigate} from \"react-router-dom\";\nimport Cookies from 'js-cookie';\nimport { AuthContext } from \"../context\";\nimport \"../styles/Login.css\";\n\nconst Login = () => {\n    const API_URL = process.env.REACT_APP_API_URL; \n    const [loginData, setLoginData] = useState({email: '', password: ''})  \n    const navigate = useNavigate();\n    const { setIsLogin, setProfileId, setAccessToken } = useContext(AuthContext);\n  \n\n    async function login(e) {\n        e.preventDefault()\n        const email = loginData.email\n        const password = loginData.password\n\n        try {\n            const response = await axios.post(`${API_URL}/organizations/login`,\n                {email, password}\n            )\n            \n            Cookies.set(\"support_access_token\", response.data, {expires: 1});\n            \n            const accessToken = response.data;\n            \n            const response_me = await axios.post(`${API_URL}/organizations/me?access_token=${accessToken}`);\n            \n            setIsLogin(true);\n            setProfileId(response_me.data.id);\n            setAccessToken(accessToken);\n            navigate(`/profile/${response_me.data.id}`);\n        }\n        catch(error) {        \n            if (error.status === 401) {\n                alert(\"Неверный email или пароль\");\n            } else {\n                alert(\"Ошибка сервера. Попробуйте позже\");\n            }\n        }\n\n        setLoginData({email: '', password: ''});\n    }\n\n\n    return (\n        <div className=\"authPage\">\n            <div className=\"authForm\">\n                <form>\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Email адрес</label>\n                        <input \n                            type=\"email\" \n                            className=\"form-control\" \n                            id=\"exampleInputEmail1\" \n                            aria-describedby=\"emailHelp\"\n                            value={loginData.email}\n                            onChange={e => setLoginData({...loginData, email: e.target.value})}\n                        />\n                        <div id=\"emailHelp\" className=\"form-text\">Мы никогда не делимся Вашим адресом.</div>\n                    </div>\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Пароль</label>\n                        <input \n                            type=\"password\" \n                            className=\"form-control\" \n                            id=\"exampleInputPassword1\"\n                            value={loginData.password}\n                            onChange={e => setLoginData({...loginData, password: e.target.value})}\n                        />\n                    </div>\n                    <div className=\"mb-3 form-check\">\n                        <Link to=\"/registration\" style={{ textDecoration: 'none' }}>\n                            <p className=\"link-dark\">Нет аккаунта?</p>\n                        </Link>\n                    </div>\n                    <div className=\"mb-3 form-check\">\n                        <Link to=\"/dont_remember_password\" style={{ textDecoration: 'none' }}>\n                            <p className=\"link-dark\">Забыли пароль?</p>\n                        </Link>\n                    </div>\n                    <button \n                        type=\"submit\" \n                        className=\"btn btn-primary\"\n                        onClick={login}\n                    >\n                        Войти\n                    </button>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;   "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}