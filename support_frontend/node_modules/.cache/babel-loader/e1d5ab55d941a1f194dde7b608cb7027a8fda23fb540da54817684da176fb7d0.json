{"ast":null,"code":"import{BrowserRouter}from\"react-router-dom\";import Navbar from\"./components/Navbar\";import AppRouter from'./components/AppRouter';import Footer from\"./components/Footer\";import{AuthContext}from\"./context\";import{useState,useEffect}from\"react\";import axios from\"axios\";import Cookies from'js-cookie';//import { AuthProvider } from \"./hooks/useAuth\";\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLogin,setIsLogin]=useState(false);const[profileId,setProfileId]=useState('');const[accessToken,setAccessToken]=useState('');async function checkMe(accessToken){try{const response_me=await axios.post(`http://localhost:8000/organizations/me?access_token=${accessToken}`);setProfileId(response_me.data.id);}catch(error){alert(\"Ошибка сервера. Попробуйте позже\");}}useEffect(()=>{const accessToken=Cookies.get(\"support_access_token\");if(accessToken){setIsLogin(true);setAccessToken(accessToken);checkMe(accessToken);}},[setIsLogin,checkMe,isLogin]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isLogin,setIsLogin,profileId,setProfileId,accessToken,setAccessToken},children:/*#__PURE__*/_jsxs(BrowserRouter,{basename:\"/\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(AppRouter,{}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"names":["BrowserRouter","Navbar","AppRouter","Footer","AuthContext","useState","useEffect","axios","Cookies","jsx","_jsx","jsxs","_jsxs","App","isLogin","setIsLogin","profileId","setProfileId","accessToken","setAccessToken","checkMe","response_me","post","data","id","error","alert","get","children","Provider","value","basename"],"sources":["/home/los/Рабочий стол/Проги/support.rf/support_frontend/src/App.js"],"sourcesContent":["import { BrowserRouter } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport AppRouter from './components/AppRouter';\nimport Footer from \"./components/Footer\";\nimport { AuthContext } from \"./context\";\nimport { useState , useEffect } from \"react\";\nimport axios from \"axios\";\nimport Cookies from 'js-cookie';\n//import { AuthProvider } from \"./hooks/useAuth\";\n\n\nfunction App() {\n  const [isLogin, setIsLogin] = useState(false);\n  const [profileId, setProfileId] = useState('');\n  const [accessToken, setAccessToken] = useState('');\n\n  async function checkMe(accessToken) {\n    try {\n        const response_me = await axios.post(`http://localhost:8000/organizations/me?access_token=${accessToken}`);\n        setProfileId(response_me.data.id);\n    }    \n    catch(error) {\n        alert(\"Ошибка сервера. Попробуйте позже\");\n    }\n  }\n\n  useEffect(() => {\n    const accessToken = Cookies.get(\"support_access_token\");        \n    if (accessToken) {\n        setIsLogin(true); \n        setAccessToken(accessToken)\n        checkMe(accessToken);\n    }\n  }, [setIsLogin, checkMe, isLogin])\n\n  return (\n    <div>\n      <AuthContext.Provider value={{ \n        isLogin,\n        setIsLogin,\n        profileId, \n        setProfileId,\n        accessToken,\n        setAccessToken\n      }}>\n        <BrowserRouter basename=\"/\">\n          <Navbar/>\n          <AppRouter/>\n          <Footer/>\n        </BrowserRouter>\n      </AuthContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,OAASA,aAAa,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,OAASC,WAAW,KAAQ,WAAW,CACvC,OAASC,QAAQ,CAAGC,SAAS,KAAQ,OAAO,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGA,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAElD,cAAe,CAAAe,OAAOA,CAACF,WAAW,CAAE,CAClC,GAAI,CACA,KAAM,CAAAG,WAAW,CAAG,KAAM,CAAAd,KAAK,CAACe,IAAI,CAAC,uDAAuDJ,WAAW,EAAE,CAAC,CAC1GD,YAAY,CAACI,WAAW,CAACE,IAAI,CAACC,EAAE,CAAC,CACrC,CACA,MAAMC,KAAK,CAAE,CACTC,KAAK,CAAC,kCAAkC,CAAC,CAC7C,CACF,CAEApB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,WAAW,CAAGV,OAAO,CAACmB,GAAG,CAAC,sBAAsB,CAAC,CACvD,GAAIT,WAAW,CAAE,CACbH,UAAU,CAAC,IAAI,CAAC,CAChBI,cAAc,CAACD,WAAW,CAAC,CAC3BE,OAAO,CAACF,WAAW,CAAC,CACxB,CACF,CAAC,CAAE,CAACH,UAAU,CAAEK,OAAO,CAAEN,OAAO,CAAC,CAAC,CAElC,mBACEJ,IAAA,QAAAkB,QAAA,cACElB,IAAA,CAACN,WAAW,CAACyB,QAAQ,EAACC,KAAK,CAAE,CAC3BhB,OAAO,CACPC,UAAU,CACVC,SAAS,CACTC,YAAY,CACZC,WAAW,CACXC,cACF,CAAE,CAAAS,QAAA,cACAhB,KAAA,CAACZ,aAAa,EAAC+B,QAAQ,CAAC,GAAG,CAAAH,QAAA,eACzBlB,IAAA,CAACT,MAAM,GAAC,CAAC,cACTS,IAAA,CAACR,SAAS,GAAC,CAAC,cACZQ,IAAA,CAACP,MAAM,GAAC,CAAC,EACI,CAAC,CACI,CAAC,CACpB,CAAC,CAEV,CAEA,cAAe,CAAAU,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}