{"ast":null,"code":"import{useState}from\"react\";import axios from\"axios\";import\"../styles/ChangePasswordModal.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePasswordModal=_ref=>{let{visiable,onClose,accessToken}=_ref;const API_URL=process.env.REACT_APP_API_URL;const[successChangePasswordAlert,setSuccessChangePasswordAlert]=useState(false);const[formData,setFormData]=useState({old_password:\"\",new_password:\"\",verify_new_password:\"\"});async function changePassword(e){e.preventDefault();try{const response=await axios.post(`${API_URL}/organizations/change_password`,{old_password:formData.old_password,new_password:formData.new_password,verify_new_password:formData.verify_new_password,access_token:accessToken});if(response.status===200){setSuccessChangePasswordAlert(true);setTimeout(()=>{setSuccessChangePasswordAlert(false);onClose();},1000);}}catch(error){console.log(error.response.data.detail);if(error.response.data.detail===\"Старый пароль не совпадает\"){alert(\"Старый пароль не совпадает\");}else if(error.response.data.detail===\"Новый пароль должен отличаться от старого\"){alert(\"Новый пароль должен отличаться от старого\");}else if(error.response.data.detail===\"Пароли не совпадают\"){alert(\"Новые пароли не совпадают\");}else{alert(\"Ошибка сервера\");}}finally{setFormData({old_password:\"\",new_password:\"\",verify_new_password:\"\"});}}if(!visiable)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"edit-profile-modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-profile-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u043C\\u0435\\u043D\\u0430 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputOldPassword\",className:\"form-label\",children:\"\\u0421\\u0442\\u0430\\u0440\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"inputOldPassword\",value:formData.old_password,onChange:e=>setFormData({...formData,old_password:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputNewPassword\",className:\"form-label\",children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"inputNewPassword\",value:formData.new_password,onChange:e=>setFormData({...formData,new_password:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputVerifyNewPassword\",className:\"form-label\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"inputVerifyPassword\",value:formData.verify_new_password,onChange:e=>setFormData({...formData,verify_new_password:e.target.value})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:changePassword,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})}),successChangePasswordAlert?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",role:\"alert\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D!\"}):null]})]})});};export default ChangePasswordModal;","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","ChangePasswordModal","_ref","visiable","onClose","accessToken","API_URL","process","env","REACT_APP_API_URL","successChangePasswordAlert","setSuccessChangePasswordAlert","formData","setFormData","old_password","new_password","verify_new_password","changePassword","e","preventDefault","response","post","access_token","status","setTimeout","error","console","log","data","detail","alert","className","onClick","children","stopPropagation","htmlFor","type","id","value","onChange","target","role"],"sources":["/home/los/Рабочий стол/Проги/support.rf/support_frontend/src/components/ChangePasswordModal.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\nimport \"../styles/ChangePasswordModal.css\"\n\nconst ChangePasswordModal = ({visiable, onClose, accessToken}) => {\n    const API_URL = process.env.REACT_APP_API_URL; \n    const [successChangePasswordAlert, setSuccessChangePasswordAlert] = useState(false); \n    const [formData, setFormData] = useState({\n        old_password: \"\",\n        new_password: \"\",\n        verify_new_password: \"\"\n    });\n\n    async function changePassword(e) {\n        e.preventDefault()\n\n        try {\n            const response = await axios.post(`${API_URL}/organizations/change_password`,\n                {\n                    old_password: formData.old_password,\n                    new_password: formData.new_password,\n                    verify_new_password: formData.verify_new_password,\n                    access_token: accessToken\n                }\n            )\n            if (response.status === 200) {\n                setSuccessChangePasswordAlert(true);\n                setTimeout(() => {\n                    setSuccessChangePasswordAlert(false);\n                    onClose();\n                }, 1000);\n            }\n        }\n        catch(error) {\n            console.log(error.response.data.detail);\n            if (error.response.data.detail === \"Старый пароль не совпадает\") {\n                alert(\"Старый пароль не совпадает\");\n            }\n            else if (error.response.data.detail === \"Новый пароль должен отличаться от старого\") {\n                alert(\"Новый пароль должен отличаться от старого\");\n            }\n            else if (error.response.data.detail === \"Пароли не совпадают\") {\n                alert(\"Новые пароли не совпадают\");\n            }\n            else {\n                alert(\"Ошибка сервера\");\n            }\n        }\n        finally {\n            setFormData({\n                old_password: \"\",\n                new_password: \"\",\n                verify_new_password: \"\"\n            })\n        }\n    }\n\n    if (!visiable) return null;\n    \n    return (\n        <div className=\"edit-profile-modal-overlay\" onClick={onClose}>\n            <div \n                className=\"edit-profile-modal-content\" \n                onClick={(e) => e.stopPropagation()} \n            >\n                <button \n                    className=\"close-button\" \n                    onClick={onClose}\n                >\n                    &times;\n                </button>\n                <h2>Смена пароля</h2>\n                <form className=\"row g-3\">\n                    <div className=\"col-md-12\">        \n                        <label htmlFor=\"inputOldPassword\" className=\"form-label\">Старый пароль</label>\n                        <input \n                            type=\"password\" \n                            className=\"form-control\" \n                            id=\"inputOldPassword\"\n                            value={formData.old_password}\n                            onChange={e => setFormData({...formData, old_password: e.target.value})}\n                        />  \n                    </div>\n                    <div className=\"col-md-12\">        \n                        <label htmlFor=\"inputNewPassword\" className=\"form-label\">Новый пароль</label>\n                        <input \n                            type=\"password\" \n                            className=\"form-control\" \n                            id=\"inputNewPassword\"\n                            value={formData.new_password}\n                            onChange={e => setFormData({...formData, new_password: e.target.value})}\n                        />  \n                    </div>\n                    <div className=\"col-md-12\">        \n                        <label htmlFor=\"inputVerifyNewPassword\" className=\"form-label\">Подтвердите новый пароль</label>\n                        <input \n                            type=\"password\" \n                            className=\"form-control\" \n                            id=\"inputVerifyPassword\"\n                            value={formData.verify_new_password}\n                            onChange={e => setFormData({...formData, verify_new_password: e.target.value})}\n                        />  \n                    </div>\n                    <div className=\"col-12\">\n                        <button \n                            type=\"submit\" \n                            className=\"btn btn-primary\"\n                            onClick={changePassword}\n                        >\n                            Сохранить\n                        </button>\n                    </div>\n                    { successChangePasswordAlert \n                        ?\n                    <div className=\"alert alert-success\" role=\"alert\">\n                        Пароль успешно изменен!\n                    </div>\n                        : null\n                    }\n                </form>      \n            </div>\n        </div>\n    );\n}\n\nexport default ChangePasswordModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}